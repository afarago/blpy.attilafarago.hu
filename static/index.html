<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>BlocklyPy - LegoAppTools</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" />

    <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/@floating-ui/core@1.6.7"></script>
    <script src="https://cdn.jsdelivr.net/npm/@floating-ui/dom@1.6.10"></script>

    <link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="favicon/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="favicon/favicon-16x16.png" />
    <link rel="manifest" href="favicon/site.webmanifest" />
    <link rel="mask-icon" href="favicon/safari-pinned-tab.svg" color="#5bbad5" />
    <link rel="shortcut icon" href="favicon/favicon.ico" />
    <meta name="msapplication-TileColor" content="#da532c" />
    <meta name="msapplication-config" content="favicon/browserconfig.xml" />
    <meta name="theme-color" content="#ffffff" />
</head>

<body class="d-flex flex-column flex-fill">
    <header>
        <nav class="navbar navbar-expand-sm border-bottom box-shadow mb-3">
            <div class="container">
                <span class="navbar-brand" style="font-size: 200%; padding-bottom: 0px" href="img/logo_full.svg">
                    <svg height="1.5em" width="4em" style="position: relative; top: -5px">
                        <use href="img/logo_full.svg#icon" xlink:href="img/logo_full.svg#icon"></use>
                    </svg>
                    <b>BlocklyPy</b> · LegoAppTools
                </span>
            </div>
        </nav>
    </header>

    <div class="toast position-fixed top-0 end-0 m-2 p-2" role="alert" aria-live="assertive" aria-atomic="true"
        id="toast1">
        <div class="toast-header">
            <strong class="me-auto toast-title"></strong>
            <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
        <div class="toast-body">
        </div>
    </div>

    <div class="container d-flex flex-column flex-fill">
        <h3>
            SPIKE to Pybricks Wizard
            <small class="text-muted">
                word-block converter to Pybricks python code (beta)
            </small>
        </h3>

        <form method="post" enctype="multipart/form-data" class="d-flex flex-column flex-fill">
            <div id="maincontainer" class="container pt-3 d-flex flex-column flex-fill">
                <div>
                    <input type="file" name="file-selector" accept=".llsp,.lms,.lmsp,.llsp3,.ev3,.ev3m"
                        id="file-selector" class="form-control" data-text="Choose a file" />

                    <div class="row col-sm-12 m-0 p-0" id="divOptions">
                        <small class="p-0">
                            <b>Examples:</b>
                            <a href="#" class="example-content-button"
                                data-file="samples/demo_cityshaper_cranemission.llsp3">SPIKE block sample</a>
                            <a href="#" class="example-content-button"
                                data-file="samples/demo_cityshaper_cranemission.lmsp">EV3Classroom sample</a>
                            <a href="#" class="example-content-button"
                                data-file="samples/demo_cityshaper_cranemission.ev3">EV3Lab sample</a>
                        </small>
                        <small class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" id="additionalCommentsCheck" />
                            <label class="form-check-label"
                                for="additionalCommentsCheck">Explanatory&nbsp;Comments</label>
                        </small>
                    </div>
                </div>

                <div id="tab-dummy" class="d-flex flex-column flex-fill active py-5">
                    <div class="d-flex flex-column flex-fill justify-content-center">
                        <div class="text-center mb-5">
                            <div>
                                <i class="bi bi-cloud-arrow-up-fill" style="
                                        font-size: var(--icon-size-big);
                                        color: cornflowerblue;
                                        line-height: 1em;
                                    "></i>
                            </div>
                            <div class="mb-4">
                                Imagine a world where magical unicorns transform your
                                <br />LEGO blockly programs into Python code!
                                <br />
                                (.llsp, .llsp3, .lms, .lmsp and .ev3 files are accepted)
                            </div>
                            <div>
                                <img src="img/devtype1.png" class="icon"/>
                                <img src="img/devtype2.png" class="icon"/>
                                <img src="img/devtype3.png" class="icon"/>
                                <img src="img/devtype4.png" class="icon"/>
                                <i class="bi bi-caret-right" style="
                                        color: cornflowerblue;
                                        font-size: calc(var(--icon-size) * 0.5);
                                        display: inline-block;
                                        vertical-align: middle;
                                    "></i>
                                <img src="img/devtype_pybricks.png" class="icon"/>
                            </div>

                        </div>
                    </div>
                </div>
                <div id="tabs-main" class="d-flex flex-column flex-fill d-none" style="min-height: 30vh">
                    <ul class="nav nav-tabs border-0" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link active" href="#tab-pycode" id="pycode-tab"
                                data-bs-toggle="tab">Python</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#tab-pseudocode" id="pseudocode-tab"
                                data-bs-toggle="tab">Pseudocode</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#tab-svg" id="svg-tab" data-bs-toggle="tab">Preview</a>
                        </li>
                        <li class="nav-item p-2 ms-auto">
                            <svg width="20" height="20" id="sb3slot">
                                <use id="svg-program-use" href="img/cat0.svg#icon" xlink:href="img/cat0.svg#icon"></use>
                            </svg>
                            <img width="20" height="20" id="devtype"></img>
                        </li>
                    </ul>

                    <div id="tab-content-wrapper">
                        <div id="preview-svg-map" class="p-3 float-right"></div>
                        <div class="tab-content h-75 border">
                            <div id="tab-svg" class="tab-pane p-3 h-100">
                                <div id="preview-svg"></div>
                                <!-- <div class="float-start" style="bottom: 2em;position: relative;">
                  <button class="btn float-start"><i class="bi bi-asterisk"></i></button>
                  <button class="btn float-start"><i class="bi bi-zoom-in"></i></button>
                  <button class="btn float-start"><i class="bi bi-zoom-out"></i></button>
                </div> -->
                            </div>
                            <div id="tab-pycode" class="tab-pane p-3 h-100 active">
                                <button class="copy-button" data-target="preview-pycode"
                                    data-success-msg="Copied Python code">
                                    <i class="bi bi-copy"></i>
                                </button>
                                <pre id="preview-pycode"></pre>
                            </div>
                            <div id="tab-pseudocode" class="tab-pane p-3 h-100">
                                <button class="copy-button" data-target="preview-pseudocode"
                                    data-success-msg="Copied Pseudocode">
                                    <i class="bi bi-copy"></i>
                                </button>
                                <pre id="preview-pseudocode"></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>

    <footer class="border-top footer text-muted">
        <div class="mx-5">
            &copy; Attila Faragó -
            <a href="https://github.com/afarago">@afarago</a> -
            <span id="github-sha">2024</span>
        </div>
    </footer>
</body>

</html>